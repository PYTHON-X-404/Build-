<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Website Requirement Assistant</title>
<style>
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

body {
    margin: 0;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    font-family: "Segoe UI", system-ui, -apple-system, sans-serif;
    overflow: hidden;
    touch-action: manipulation;
}

.chatbox {
    width: 95%;
    max-width: 850px;
    height: 90vh;
    background: #ffffff;
    border-radius: 20px;
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.header {
    background: linear-gradient(90deg, #1f2933 0%, #374151 100%);
    color: #fff;
    text-align: center;
    padding: 18px;
    font-weight: 700;
    font-size: 20px;
    letter-spacing: 0.5px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    position: relative;
    flex-shrink: 0;
}

.header::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 5%;
    width: 90%;
    height: 3px;
    background: linear-gradient(90deg, transparent, #60a5fa, transparent);
}

.chat-area {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
    background: #f8fafc;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.message {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    margin-bottom: 8px;
    animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.bot-message {
    align-self: flex-start;
}

.user-message {
    align-self: flex-end;
    flex-direction: row-reverse;
}

.avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    padding: 6px;
}

.bot-avatar {
    background: linear-gradient(135deg, #3b82f6, #8b5cf6);
    box-shadow: 0 4px 8px rgba(59, 130, 246, 0.3);
}

.user-avatar {
    background: linear-gradient(135deg, #1f2933, #4b5563);
    box-shadow: 0 4px 8px rgba(31, 41, 51, 0.3);
}

.message-content {
    max-width: 70%;
    min-width: 120px;
    padding: 12px 16px;
    border-radius: 18px;
    font-size: 14.5px;
    line-height: 1.5;
    position: relative;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.bot-content {
    background: #ffffff;
    color: #111827;
    border: 1px solid #e5e7eb;
    border-top-left-radius: 4px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
}

.user-content {
    background: linear-gradient(135deg, #1f2933, #374151);
    color: #fff;
    border-top-right-radius: 4px;
    box-shadow: 0 4px 8px rgba(31, 41, 51, 0.2);
}

.bot-content::before {
    content: "";
    position: absolute;
    top: 0;
    left: -8px;
    width: 0;
    height: 0;
    border-top: 8px solid #ffffff;
    border-left: 8px solid transparent;
}

.user-content::before {
    content: "";
    position: absolute;
    top: 0;
    right: -8px;
    width: 0;
    height: 0;
    border-top: 8px solid #1f2933;
    border-right: 8px solid transparent;
}

.typing-indicator {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    background: #ffffff;
    border-radius: 18px;
    border: 1px solid #e5e7eb;
    border-top-left-radius: 4px;
    width: fit-content;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
    margin-bottom: 8px;
    animation: fadeIn 0.3s ease-out;
}

.typing-indicator::before {
    content: "";
    position: absolute;
    top: 0;
    left: -8px;
    width: 0;
    height: 0;
    border-top: 8px solid #ffffff;
    border-left: 8px solid transparent;
}

.typing-dots {
    display: flex;
    gap: 4px;
}

.typing-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #6b7280;
    animation: typingAnimation 1.4s infinite ease-in-out;
}

.typing-dot:nth-child(1) { animation-delay: -0.32s; }
.typing-dot:nth-child(2) { animation-delay: -0.16s; }

@keyframes typingAnimation {
    0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
    40% { transform: scale(1); opacity: 1; }
}

.smooth-typewriter {
    overflow: hidden;
    white-space: normal;
    display: block;
}

.smooth-typewriter span {
    display: inline-block;
    overflow: hidden;
    animation: smoothTyping 2.5s ease-out forwards;
    white-space: normal;
    word-wrap: break-word;
}

@keyframes smoothTyping {
    from { 
        opacity: 0;
        transform: translateY(5px);
    }
    to { 
        opacity: 1;
        transform: translateY(0);
    }
}

.input-area {
    display: flex;
    padding: 16px 20px;
    gap: 12px;
    border-top: 1px solid #e5e7eb;
    background: #f9fafb;
    flex-shrink: 0;
}

input {
    flex: 1;
    padding: 12px 16px;
    border-radius: 12px;
    border: 2px solid #e5e7eb;
    background: #ffffff;
    font-size: 14.5px;
    outline: none;
    transition: all 0.3s;
    min-width: 0;
}

input:focus {
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

button {
    padding: 12px 20px;
    background: linear-gradient(135deg, #1f2933, #374151);
    color: #fff;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    font-weight: 600;
    font-size: 14.5px;
    letter-spacing: 0.3px;
    transition: all 0.3s;
    box-shadow: 0 4px 8px rgba(31, 41, 51, 0.2);
    white-space: nowrap;
    flex-shrink: 0;
}

button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(31, 41, 51, 0.25);
}

button:active {
    transform: translateY(0);
}

button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
}

.welcome-note {
    text-align: center;
    color: #6b7280;
    font-size: 13px;
    padding: 8px 0 16px;
    font-style: italic;
    flex-shrink: 0;
}

@media (max-width: 768px) {
    .chatbox {
        width: 100%;
        height: 100vh;
        border-radius: 0;
    }
    
    .message-content {
        max-width: 75%;
        font-size: 14px;
        padding: 10px 14px;
    }
    
    .header {
        padding: 16px;
        font-size: 18px;
    }
    
    .avatar {
        width: 36px;
        height: 36px;
    }
    
    input, button {
        padding: 10px 14px;
        font-size: 14px;
    }
}

/* Scrollbar styling */
.chat-area::-webkit-scrollbar {
    width: 6px;
}

.chat-area::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
}

.chat-area::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 10px;
}

.chat-area::-webkit-scrollbar-thumb:hover {
    background: #a8a8a8;
}

/* Prevent text selection on messages */
.message-content {
    -webkit-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
}
</style>
</head>

<body>
<div class="chatbox">
    <div class="header">üåê Website Requirement Assistant</div>
    
    <div class="chat-area" id="chatArea">
        <div class="welcome-note">Chat with Hydro - Your website planning assistant</div>
    </div>
    
    <div class="input-area">
        <input type="text" id="userInput" placeholder="Type your answer here..." />
        <button onclick="send()" id="sendBtn">Send</button>
    </div>
</div>

<script>
const questions = [
    "Hello! I'm Hydro, the assistant of Arafat. I'm here to understand your requirements better. üòä To begin with, what type of website are you looking for? (For example: E-commerce, Portfolio, Business, Blog, etc.)",
    
    "Great choice! May I know your brand or business name?",
    
    "Do you already have a logo for your brand, or would you like us to design one for you?",
    
    "If you have a logo, is it final or are you open to improvements?",
    
    "What is the main purpose of this website? (For example: selling products, building trust, getting leads, or sharing information)",
    
    "That sounds wonderful! I wish you great success with your business. üå±",
    
    "Now, could you please describe your website idea in simple English? You may explain everything from A to Z.",
    
    "Thank you for sharing. Do you prefer a modern, simple design or a premium, luxurious look?",
    
    "What is your timeline and urgency level for this project?",
    
    "Do you need ongoing maintenance and future updates after the website is completed?",
    
    "Who is your target audience for this website?",
    
    "Is mobile responsiveness a priority for your website?",
    
    "What language preference do you have for the website?",
    
    "Do you have any SEO or digital marketing expectations?",
    
    "Is there anything specific you really like or dislike in websites you've seen before?",
    
    "Do you have any reference websites that inspire you? If yes, please share the links.",
    
    "Please share your social media links (such as Facebook, Instagram, or LinkedIn) so we can connect them with your website.",
    
    "Kindly provide an email address or WhatsApp number so we can easily contact you for updates and handover.",
    
    "Just to confirm, is all the information you provided correct?",
    
    "Perfect! One more small question, if you don't mind üòä",
    
    "Please don't say no right away‚Äîjust answer this one question for me. What is your budget? I'll plan and work according to your budget.",
    
    "Thank you for your honesty. We truly appreciate it.",
    
    "Arafat will start planning your website based on your requirements. You're in good hands‚Äîno worries at all.",
    
    "If you have any questions later, feel free to message us anytime at wa.me/8801610709657",
];

let index = 0;
const chatArea = document.getElementById("chatArea");
const input = document.getElementById("userInput");
const sendBtn = document.getElementById("sendBtn");

// Robot SVG - Clean and clear
const robotSVG = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="5" y="7" width="14" height="10" rx="2" fill="white"/>
<rect x="8" y="4" width="8" height="3" rx="1.5" fill="white"/>
<circle cx="10" cy="10" r="1.5" fill="#3b82f6"/>
<circle cx="14" cy="10" r="1.5" fill="#3b82f6"/>
<rect x="9" y="13" width="6" height="2" rx="1" fill="#8b5cf6"/>
<rect x="7" y="17" width="2" height="3" rx="1" fill="#3b82f6"/>
<rect x="15" y="17" width="2" height="3" rx="1" fill="#3b82f6"/>
</svg>`;

// User avatar SVG - Proper person icon
const userSVG = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="12" cy="8" r="3.5" fill="white"/>
<path d="M5 20C5 16.6863 7.68629 14 11 14H13C16.3137 14 19 16.6863 19 20V21H5V20Z" fill="white"/>
</svg>`;

// Prevent zooming
document.addEventListener('gesturestart', function(e) {
    e.preventDefault();
});

document.addEventListener('wheel', function(e) {
    if(e.ctrlKey) {
        e.preventDefault();
    }
}, { passive: false });

// Initialize chat
setTimeout(() => {
    botMessage(questions[index], true);
}, 800);

function send() {
    const text = input.value.trim();
    if (text === "") return;
    
    userMessage(text);
    input.value = "";
    index++;
    
    setTimeout(() => {
        if (index < questions.length) {
            showTypingIndicator();
            setTimeout(() => {
                removeTypingIndicator();
                botMessage(questions[index], true);
            }, 800);
        } else {
            showTypingIndicator();
            setTimeout(() => {
                removeTypingIndicator();
                botMessage("‚ú® Thank you for chatting with us! Arafat will contact you soon.", false);
                input.disabled = true;
                sendBtn.disabled = true;
                sendBtn.textContent = "Done";
                
                // Close chatbot after 3 seconds
                setTimeout(() => {
                    window.parent.postMessage('closeChatbot', '*');
                }, 3000);
            }, 800);
        }
    }, 600);
}

function botMessage(msg, typewriterEffect = false) {
    const messageDiv = document.createElement("div");
    messageDiv.className = "message bot-message";
    
    const avatarDiv = document.createElement("div");
    avatarDiv.className = "avatar bot-avatar";
    avatarDiv.innerHTML = robotSVG;
    
    const contentDiv = document.createElement("div");
    contentDiv.className = "message-content bot-content";
    
    if (typewriterEffect) {
        contentDiv.classList.add("smooth-typewriter");
        const textSpan = document.createElement("span");
        textSpan.textContent = msg;
        contentDiv.appendChild(textSpan);
    } else {
        contentDiv.textContent = msg;
    }
    
    messageDiv.appendChild(avatarDiv);
    messageDiv.appendChild(contentDiv);
    chatArea.appendChild(messageDiv);
    
    chatArea.scrollTop = chatArea.scrollHeight;
}

function userMessage(msg) {
    const messageDiv = document.createElement("div");
    messageDiv.className = "message user-message";
    
    const avatarDiv = document.createElement("div");
    avatarDiv.className = "avatar user-avatar";
    avatarDiv.innerHTML = userSVG;
    
    const contentDiv = document.createElement("div");
    contentDiv.className = "message-content user-content";
    contentDiv.textContent = msg;
    
    messageDiv.appendChild(avatarDiv);
    messageDiv.appendChild(contentDiv);
    chatArea.appendChild(messageDiv);
    
    chatArea.scrollTop = chatArea.scrollHeight;
}

function showTypingIndicator() {
    const typingDiv = document.createElement("div");
    typingDiv.className = "typing-indicator";
    typingDiv.id = "typingIndicator";
    
    const avatarDiv = document.createElement("div");
    avatarDiv.className = "avatar bot-avatar";
    avatarDiv.innerHTML = robotSVG;
    
    const dotsDiv = document.createElement("div");
    dotsDiv.className = "typing-dots";
    
    for (let i = 0; i < 3; i++) {
        const dot = document.createElement("div");
        dot.className = "typing-dot";
        dotsDiv.appendChild(dot);
    }
    
    typingDiv.appendChild(avatarDiv);
    typingDiv.appendChild(dotsDiv);
    chatArea.appendChild(typingDiv);
    chatArea.scrollTop = chatArea.scrollHeight;
}

function removeTypingIndicator() {
    const typingIndicator = document.getElementById("typingIndicator");
    if (typingIndicator) {
        typingIndicator.remove();
    }
}

// Allow Enter key to send message
input.addEventListener("keypress", function(event) {
    if (event.key === "Enter") {
        event.preventDefault();
        send();
    }
});

// Focus on input field
window.onload = function() {
    setTimeout(() => {
        input.focus();
    }, 1000);
};

// Listen for messages from parent to close chatbot
window.addEventListener('message', function(event) {
    if (event.data === 'closeChatbot') {
        window.parent.postMessage('closeChatbot', '*');
    }
});
</script>
</body>
</html>